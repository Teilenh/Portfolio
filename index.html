<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background-color: #000;
            color: #00ff00;
            overflow-x: hidden;
            height: 100vh;
            cursor: text;
        }

        .terminal {
            width: 100%;
            height: 100vh;
            padding: 20px;
            overflow-y: auto;
            position: relative;
        }

        .terminal-header {
            color: #00ff00;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.4;
        }

        .output-line {
            margin-bottom: 5px;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .prompt {
            color: #00ff00;
        }

        .command {
            color: #ffffff;
        }

        .input-line {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .prompt-text {
            color: #00ff00;
            margin-right: 5px;
        }

        .command-input {
            background: transparent;
            border: none;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
            flex: 1;
            caret-color: #00ff00;
        }

        .cursor {
            display: inline-block;
            background-color: #00ff00;
            width: 8px;
            height: 16px;
            animation: blink 1s infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .error {
            color: #ff4444;
        }

        .success {
            color: #44ff44;
        }

        .info {
            color: #4444ff;
        }

        .warning {
            color: #ffff44;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .terminal {
                padding: 10px;
            }
            
            body {
                font-size: 12px;
            }
        }

        /* Scrollbar styling */
        .terminal::-webkit-scrollbar {
            width: 8px;
        }

        .terminal::-webkit-scrollbar-track {
            background: #000;
        }

        .terminal::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 4px;
        }

        .terminal::-webkit-scrollbar-thumb:hover {
            background: #00cc00;
        }

        /* File listing styles */
        .file-list {
            margin: 10px 0;
        }

        .file-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 5px;
            min-width: 150px;
        }

        .directory {
            color: #4444ff;
            font-weight: bold;
        }

        .executable {
            color: #44ff44;
            font-weight: bold;
        }

        /* ASCII Art */
        .ascii-art {
            color: #00ff00;
            font-size: 12px;
            line-height: 1.2;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="terminal" id="terminal">
        <div class="terminal-header">
            <div class="ascii-art">
╔══════════════════════════════════════════════════════════════════════════════╗
║                           TERMINAL PORTFOLIO v1.0                           ║
║                              Linux Enthusiast                               ║
╚══════════════════════════════════════════════════════════════════════════════╝
            </div>
            <div>Bienvenue sur mon portfolio terminal ! Tapez 'help' pour commencer.</div>
            <div>Système : Linux Terminal Simulator</div>
            <div>Utilisateur : guest@portfolio</div>
            <div>─────────────────────────────────────────────────────────────────────────────</div>
        </div>
        
        <div id="output"></div>
        
        <div class="input-line">
            <span class="prompt-text">guest@portfolio:~$ </span>
            <input type="text" class="command-input" id="commandInput" autofocus>
            <span class="cursor"></span>
        </div>
    </div>

    <script>
        // ===== SYSTÈME DE MODULES DE COMMANDES =====
        
        // Classe de base pour les commandes
        class Command {
            constructor(name, description) {
                this.name = name;
                this.description = description;
            }
            
            execute(args, terminal) {
                throw new Error('La méthode execute() doit être implémentée');
            }
        }
        
        // ===== MODULES DE COMMANDES =====
        
        // Module: Commandes système
        class SystemCommands {
            static getCommands() {
                return [
                    new class extends Command {
                        constructor() { super('whoami', 'Affiche l\'utilisateur actuel'); }
                        execute(args, terminal) {
                            terminal.displayOutput('guest');
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('pwd', 'Affiche le répertoire actuel'); }
                        execute(args, terminal) {
                            terminal.displayOutput(terminal.currentDirectory);
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('uname', 'Informations système'); }
                        execute(args, terminal) {
                            terminal.displayOutput('Linux terminal-portfolio 5.15.0-portfolio #1 SMP Web Terminal x86_64 GNU/Linux');
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('date', 'Affiche la date actuelle'); }
                        execute(args, terminal) {
                            terminal.displayOutput(new Date().toString());
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('uptime', 'Temps de fonctionnement'); }
                        execute(args, terminal) {
                            const uptime = Math.floor((Date.now() - terminal.startTime) / 1000);
                            const minutes = Math.floor(uptime / 60);
                            const seconds = uptime % 60;
                            terminal.displayOutput(`up ${minutes} minutes, ${seconds} seconds`);
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('clear', 'Efface l\'écran'); }
                        execute(args, terminal) {
                            terminal.output.innerHTML = '';
                        }
                    }
                ];
            }
        }
        
        // Module: Commandes de fichiers
        class FileCommands {
            static getCommands() {
                return [
                    new class extends Command {
                        constructor() { super('ls', 'Liste les fichiers et dossiers'); }
                        execute(args, terminal) {
                            const path = args[0] || terminal.currentDirectory;
                            const resolved = terminal.resolvePath(path);
                            const item = terminal.getFileSystemItem(resolved);

                            if (!item) {
                                terminal.displayOutput(`ls: cannot access '${path}': No such file or directory`, 'error');
                                return;
                            }

                            if (item.type === 'file') {
                                terminal.displayOutput(path);
                                return;
                            }

                            const files = Object.keys(item.contents || {});
                            if (files.length === 0) {
                                terminal.displayOutput('(répertoire vide)');
                                return;
                            }

                            let output = '<div class="file-list">';
                            files.forEach(file => {
                                const fileItem = item.contents[file];
                                let className = '';
                                let suffix = '';
                                
                                if (fileItem.type === 'directory') {
                                    className = 'directory';
                                    suffix = '/';
                                } else if (file.endsWith('.sh') || file.endsWith('.py')) {
                                    className = 'executable';
                                    suffix = '*';
                                }
                                
                                output += `<span class="file-item ${className}">${file}${suffix}</span>`;
                            });
                            output += '</div>';
                            
                            terminal.displayHTML(output);
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('cat', 'Affiche le contenu d\'un fichier'); }
                        execute(args, terminal) {
                            if (args.length === 0) {
                                terminal.displayOutput('cat: missing file operand', 'error');
                                return;
                            }

                            const path = args[0];
                            const resolved = terminal.resolvePath(path);
                            const item = terminal.getFileSystemItem(resolved);

                            if (!item) {
                                terminal.displayOutput(`cat: ${path}: No such file or directory`, 'error');
                                return;
                            }

                            if (item.type === 'directory') {
                                terminal.displayOutput(`cat: ${path}: Is a directory`, 'error');
                                return;
                            }

                            const content = item.content || 'Fichier vide';
                            content.split('\n').forEach(line => {
                                terminal.displayOutput(line);
                            });
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('cd', 'Change de répertoire'); }
                        execute(args, terminal) {
                            const path = args[0] || '~';
                            const resolved = terminal.resolvePath(path);
                            const item = terminal.getFileSystemItem(resolved);

                            if (!item) {
                                terminal.displayOutput(`cd: ${path}: No such file or directory`, 'error');
                                return;
                            }

                            if (item.type !== 'directory') {
                                terminal.displayOutput(`cd: ${path}: Not a directory`, 'error');
                                return;
                            }

                            terminal.currentDirectory = resolved;
                        }
                    }
                ];
            }
        }
        
        // Module: Commandes portfolio
        class PortfolioCommands {
            static getCommands() {
                return [
                    new class extends Command {
                        constructor() { super('about', 'À propos de moi'); }
                        execute(args, terminal) {
                            terminal.displayOutput('À propos de moi', 'success');
                            terminal.displayOutput('');
                            terminal.displayOutput('Passionné de Linux et de développement, je crée des solutions');
                            terminal.displayOutput('techniques innovantes et explore les technologies open source.');
                            terminal.displayOutput('');
                            terminal.displayOutput('Spécialisé dans:');
                            terminal.displayOutput('• Administration système Linux');
                            terminal.displayOutput('• Développement Python (Qt6, web)');
                            terminal.displayOutput('• Auto-hébergement et home server');
                            terminal.displayOutput('• Personnalisation et optimisation système');
                            terminal.displayOutput('');
                            terminal.displayOutput('Tapez "cat README.md" pour plus d\'informations.', 'info');
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('projects', 'Mes projets'); }
                        execute(args, terminal) {
                            terminal.displayOutput('Mes projets principaux', 'success');
                            terminal.displayOutput('');
                            terminal.displayOutput('1. Home Server Personnel');
                            terminal.displayOutput('   Infrastructure auto-hébergée avec services multiples');
                            terminal.displayOutput('');
                            terminal.displayOutput('2. Linux Ricing & Configurations');
                            terminal.displayOutput('   Personnalisation avancée d\'environnements Linux');
                            terminal.displayOutput('');
                            terminal.displayOutput('3. PyKemon - Jeu Python Qt6');
                            terminal.displayOutput('   Application de jeu avec interface graphique moderne');
                            terminal.displayOutput('');
                            terminal.displayOutput('Utilisez "ls projects" et "cat projects/*" pour plus de détails.', 'info');
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('skills', 'Mes compétences'); }
                        execute(args, terminal) {
                            terminal.displayOutput('Compétences techniques', 'success');
                            terminal.displayOutput('');
                            terminal.displayOutput('Langages de programmation:');
                            terminal.displayOutput('• Python (Avancé) - Qt6, Django, Flask');
                            terminal.displayOutput('• JavaScript (Intermédiaire) - Node.js, vanilla JS');
                            terminal.displayOutput('• Bash/Shell (Avancé) - Scripting système');
                            terminal.displayOutput('• HTML/CSS (Avancé) - Design responsive');
                            terminal.displayOutput('');
                            terminal.displayOutput('Systèmes & Outils:');
                            terminal.displayOutput('• Linux (Arch, Ubuntu, Debian)');
                            terminal.displayOutput('• Docker & containerisation');
                            terminal.displayOutput('• Git & développement collaboratif');
                            terminal.displayOutput('• Nginx & administration web');
                            terminal.displayOutput('');
                            terminal.displayOutput('Explorez "ls skills" pour plus de détails.', 'info');
                        }
                    },
                    
                    new class extends Command {
                        constructor() { super('contact', 'Informations de contact'); }
                        execute(args, terminal) {
                            terminal.displayOutput('Informations de contact', 'success');
                            terminal.displayOutput('');
                            terminal.displayOutput('GitHub: https://github.com/votre-username');
                            terminal.displayOutput('Email: votre.email@example.com');
                            terminal.displayOutput('LinkedIn: https://linkedin.com/in/votre-profil');
                            terminal.displayOutput('');
                            terminal.displayOutput('N\'hésitez pas à me contacter pour discuter de projets', 'info');
                            terminal.displayOutput('ou collaborations techniques !', 'info');
                        }
                    }
                ];
            }
        }
        
        // Module: Easter eggs
        class EasterEggCommands {
            static getCommands() {
                return [
                    new class extends Command {
                        constructor() { super('sudo', 'Easter egg - Commande sudo'); }
                        execute(args, terminal) {
                            if (args.length === 0) {
                                terminal.displayOutput('sudo: a password is required', 'error');
                                return;
                            }

                            const command = args.join(' ');
                            
                            if (command === 'rm -rf /') {
                                terminal.displayOutput('sudo: rm -rf /: operation not permitted', 'error');
                                terminal.displayOutput('');
                                terminal.displayOutput('Nice try! 😄', 'warning');
                                terminal.displayOutput('Ce portfolio est protégé contre les destructions accidentelles.', 'info');
                            } else {
                                terminal.displayOutput(`sudo: ${command}: command not found`, 'error');
                            }
                        }
                    }
                ];
            }
        }
        
        // Module: Commande help (spéciale car elle doit connaître toutes les commandes)
        class HelpCommand extends Command {
            constructor() { 
                super('help', 'Affiche la liste des commandes disponibles'); 
            }
            
            execute(args, terminal) {
                terminal.displayOutput('Commandes disponibles:', 'success');
                terminal.displayOutput('');
                for (const [cmd, command] of Object.entries(terminal.commands)) {
                    terminal.displayOutput(`  ${cmd.padEnd(12)} - ${command.description}`);
                }
                terminal.displayOutput('');
                terminal.displayOutput('Utilisez les flèches haut/bas pour naviguer dans l\'historique.', 'info');
            }
        }

        class Terminal {
            constructor() {
                this.output = document.getElementById('output');
                this.input = document.getElementById('commandInput');
                this.terminal = document.getElementById('terminal');
                this.commandHistory = [];
                this.historyIndex = -1;
                this.currentDirectory = '~';
                
                this.loadCommands();
                this.initializeFileSystem();
                this.setupEventListeners();
            }

            loadCommands() {
                this.commands = {};
                
                // Charger tous les modules de commandes
                const commandModules = [
                    SystemCommands,
                    FileCommands,
                    PortfolioCommands,
                    EasterEggCommands
                ];
                
                // Enregistrer toutes les commandes
                commandModules.forEach(module => {
                    module.getCommands().forEach(command => {
                        this.registerCommand(command);
                    });
                });
                
                // Ajouter la commande help en dernier (elle a besoin de connaître toutes les commandes)
                this.registerCommand(new HelpCommand());
            }
            
            registerCommand(command) {
                this.commands[command.name] = command;
            }

            initializeFileSystem() {

                this.startTime = Date.now();
                
                this.fileSystem = {
                    '~': {
                        type: 'directory',
                        contents: {
                            'README.md': {
                                type: 'file',
                                content: `# Portfolio Terminal

Bienvenue sur mon portfolio interactif !

## Navigation
- Utilisez 'help' pour voir toutes les commandes
- Tapez 'about' pour en savoir plus sur moi
- Tapez 'projects' pour voir mes projets
- Tapez 'skills' pour mes compétences

## Projets principaux
- Home Server personnel
- Configurations Linux (ricing)
- Applications Python Qt6
- Projets web

Bonne exploration !`
                            },
                            'projects': {
                                type: 'directory',
                                contents: {
                                    'homeserver.txt': {
                                        type: 'file',
                                        content: `# Home Server Project

Description: Serveur personnel auto-hébergé
Technologies: Linux, Docker, Nginx
Fonctionnalités:
- Hébergement web
- Stockage cloud personnel
- Services média
- Monitoring système

Status: En cours de développement`
                                    },
                                    'linux-ricing.txt': {
                                        type: 'file',
                                        content: `# Linux Ricing & Configurations

Description: Personnalisation avancée d'environnements Linux
Technologies: i3wm, polybar, rofi, zsh
Fonctionnalités:
- Thèmes personnalisés
- Scripts d'automatisation
- Configurations dotfiles
- Optimisations système

Status: Maintenance continue`
                                    },
                                    'pykemon.txt': {
                                        type: 'file',
                                        content: `# PyKemon - Jeu Python Qt6

Description: Jeu inspiré de Pokémon en Python
Technologies: Python, Qt6, SQLite
Fonctionnalités:
- Interface graphique moderne
- Système de combat
- Gestion de base de données
- Sauvegarde de progression

Status: Prototype fonctionnel`
                                    }
                                }
                            },
                            'skills': {
                                type: 'directory',
                                contents: {
                                    'languages.txt': {
                                        type: 'file',
                                        content: `# Langages de programmation

## Maîtrisés
- Python (Avancé)
- JavaScript (Intermédiaire)
- Bash/Shell (Avancé)
- HTML/CSS (Avancé)

## En apprentissage
- Go
- Rust
- TypeScript

## Outils et frameworks
- Qt6/PySide6
- Django/Flask
- Node.js
- Docker`
                                    }
                                }
                            }
                        }
                    }
                };
            }

            setupEventListeners() {
                // Focus sur le terminal au clic
                this.terminal.addEventListener('click', () => {
                    this.input.focus();
                });

                // Gestion des touches
                this.input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        this.executeCommand();
                    } else if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        this.navigateHistory(-1);
                    } else if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        this.navigateHistory(1);
                    }
                });

                // Maintenir le focus
                this.input.addEventListener('blur', () => {
                    setTimeout(() => this.input.focus(), 100);
                });

                // Auto-focus initial
                this.input.focus();
            }

            executeCommand() {
                const command = this.input.value.trim();
                if (command === '') return;

                this.addToHistory(command);
                this.displayCommand(command);
                this.processCommand(command);
                this.input.value = '';
            }

            addToHistory(command) {
                this.commandHistory.push(command);
                this.historyIndex = this.commandHistory.length;
            }

            navigateHistory(direction) {
                if (this.commandHistory.length === 0) return;

                this.historyIndex += direction;
                if (this.historyIndex < 0) this.historyIndex = 0;
                if (this.historyIndex >= this.commandHistory.length) {
                    this.historyIndex = this.commandHistory.length;
                    this.input.value = '';
                } else {
                    this.input.value = this.commandHistory[this.historyIndex];
                }
            }

            displayCommand(command) {
                const line = document.createElement('div');
                line.className = 'output-line';
                line.innerHTML = `<span class="prompt">guest@portfolio:${this.currentDirectory}$</span> <span class="command">${command}</span>`;
                this.output.appendChild(line);
                this.scrollToBottom();
            }

            processCommand(command) {
                const parts = command.split(' ');
                const cmd = parts[0].toLowerCase();
                const args = parts.slice(1);

                if (this.commands[cmd]) {
                    this.commands[cmd].execute(args, this);
                } else {
                    this.displayOutput(`bash: ${cmd}: command not found`, 'error');
                }
            }

            displayOutput(text, className = '') {
                const line = document.createElement('div');
                line.className = `output-line ${className}`;
                line.textContent = text;
                this.output.appendChild(line);
                this.scrollToBottom();
            }

            displayHTML(html) {
                const line = document.createElement('div');
                line.className = 'output-line';
                line.innerHTML = html;
                this.output.appendChild(line);
                this.scrollToBottom();
            }

            scrollToBottom() {
                this.terminal.scrollTop = this.terminal.scrollHeight;
            }

            // Utilitaires pour le système de fichiers
            resolvePath(path) {
                if (path.startsWith('/')) {
                    return path;
                }
                if (path === '~' || path === '') {
                    return '~';
                }
                if (path.startsWith('~/')) {
                    return path;
                }
                return this.currentDirectory === '~' ? `~/${path}` : `${this.currentDirectory}/${path}`;
            }

            getFileSystemItem(path) {
                const parts = path.split('/').filter(p => p !== '');
                let current = this.fileSystem['~'];
                
                if (parts.length === 0 || (parts.length === 1 && parts[0] === '~')) {
                    return current;
                }

                // Supprimer le ~ du début
                if (parts[0] === '~') {
                    parts.shift();
                }

                for (const part of parts) {
                    if (!current.contents || !current.contents[part]) {
                        return null;
                    }
                    current = current.contents[part];
                }

                return current;
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            new Terminal();
        });
    </script>
</body>
</html>